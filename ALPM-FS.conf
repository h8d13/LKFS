# ALPM-FS Configuration File
# Bootable Alpine Linux System Configuration

# ============================================
# Filesystem Configuration
# ============================================

# Root filesystem type (ext4, xfs, btrfs, f2fs)
ROOT_FS_TYPE="ext4"

# Root filesystem mount options
ROOT_FS_OPTS="rw,relatime"

# EFI partition size in MiB
EFI_SIZE=512

# ============================================
# Alpine Repository
# ============================================

# Alpine version (e.g., v3.22, v3.21, edge) (Minor version automatically takes latest)
# WARNING: Needs "edge" to run "linux-stable" (expect some bugs too)
# If this is changed between runs any progress in alpinestein chroot would be lost
ALPINE_VERSION="v3.22"

# Enable testing repository (experimental/bleeding-edge packages)
# When enabled, testing repo is added as @testing tagged repository
# Tagged repos are NOT used by default - must explicitly request with @testing suffix
#
# Example used in the source code: apk add refind@testing (pulls refind from edge/testing repo)
#
# WARNING: Testing packages have NO official support and may break your system
# WARNING: Do NOT mix stable and edge main/community repos - only use @testing tag
ENABLE_TESTING="yes"

# Alpine mirror
ALPINE_MIRROR="https://dl-cdn.alpinelinux.org/alpine"

# ============================================
# zram Configuration
# ============================================

# zram size in MiB
ZRAM_SIZE=8192

# zram compression algorithm (lzo, lz4, zstd)
ZRAM_ALGO="zstd"

# ============================================
# Boot Configuration
# ============================================

# Bootloader choice (grub or refind)
# NOTE: refind requires ENABLE_TESTING="yes" (available in edge/testing repository)
BOOTLOADER="refind"

# GRUB timeout in seconds
GRUB_TIMEOUT=1

# GRUB menu entry name
GRUB_MENUENTRY="ALPM-FS"

# rEFInd timeout in seconds
REFIND_TIMEOUT=20

# rEFInd resolution (e.g., 1920 1080)
REFIND_RESOLUTION="1920 1080"

# rEFInd menu entry name
REFIND_MENUENTRY="ALPM-FS"

# Extra kernel command line parameters (console, quiet, etc) Both for refind and grub
# Note: rootfstype and modules are auto-generated based on ROOT_FS_TYPE
# The rest is up to you to figure out for your hardware...
# This example setting fixes my Iris laptop's GPU

KERNEL_CMDLINE_EXTRA="console=tty0 i915.enable_guc=0"

# ============================================
# System Packages
# ============================================
# Core system packages

# x86_64 kernel options:
# linux-lts (Long Term Support, most hardware)

# linux-stable (latest stable kernel) # NEEDS ALPINE_VERSION="edge" enabled
# and on alpine this one means trouble
# linux-virt (minimal VM kernel, omits a lot of drivers)
# linux-openpax (OpenPAX security memory patches)

KERNEL_FLAVOR="linux-lts"

CORE_PACKAGES="$KERNEL_FLAVOR linux-firmware-none acpi mkinitfs"

## can be removed for VM usage comment out or "" empty
CORE_PACKAGES2="linux-firmware-other"

# linux-firmware for all
# ============================================
# HARDWARE #Optional/Depending on HW
# ============================================
# Uncomment only one of these based on your CPU vendor

# Intel
HW_GROUP="linux-firmware-intel intel-gmmlib intel-media-driver libva-intel-driver mesa-vulkan-intel"

#HW_GROUP_AMD="amd-ucode linux-firmware-amdgpu"

# ============================================
# GRAPHICS #Optional/Can leave just mesa
# ============================================

GP_GROUP_MESA="mesa mesa-gl mesa-va-gallium mesa-dri-gallium"

# ============================================
# PKGS
# ============================================

# System utilities
SYSTEM_PACKAGES="openrc openrc-init util-linux coreutils e2fsprogs dosfstools dbus dbus-openrc eudev acpid busybox-openrc busybox-extras alpine-conf kbd-bkeymaps kbd zram-init"

# ============================================
# WiFi Configuration
# ============================================
# note user will still need to be added to "plugdev" or use from root

WIFI_NEEDED="yes"
WIFI_PACKAGES="networkmanager networkmanager-wifi networkmanager-cli busybox-mdev-openrc wpa_supplicant"

SERVICES_DEFAULT_WIFI="networkmanager"

# ============================================
# Boot Services
# ============================================

# Services to add to sysinit runlevel
SERVICES_SYSINIT="devfs dmesg"

# Services to add to boot runlevel
SERVICES_BOOT="hwclock modules sysctl hostname bootmisc syslog localmount zram-init udev"

# Services to add to shutdown runlevel
SERVICES_SHUTDOWN="mount-ro killprocs savecache"

# Services to add to default runlevel
SERVICES_DEFAULT="acpid dbus"

# ============================================
# User Configuration #Please change me
# ============================================

# Hostname
HOSTNAME="alpmfs"

# Default root password
ROOT_PASSWORD="alpine"

# System locale (run 'locale -a' to see all options)
# Common options: C.UTF-8, en_US.UTF-8, en_GB.UTF-8, etc.
LOCALE="en_GB.UTF-8"

# Additional packages or nice-to-haves
EXTRA_PACKAGES="iptables pciutils ufw ip6tables util-linux wget curl tar zstd hwinfo lshw usbutils micro bash musl-locales"
