# ALPM-FS Configuration File
# Bootable Alpine Linux System Configuration

# ============================================
# Filesystem Configuration
# ============================================

# Root filesystem type (ext4, xfs, btrfs, f2fs)
ROOT_FS_TYPE="ext4"

# Root filesystem mount options
ROOT_FS_OPTS="rw,relatime"

# EFI partition size in MiB
EFI_SIZE=512

# ============================================
# Alpine Repository
# ============================================

# Alpine version (e.g., v3.22, v3.21, edge) (Minor version automatically takes latest)
# WARNING: Needs "edge" to run "linux-stable" (expect some bugs too)
# If this is changed between runs any progress in alpinestein chroot would be lost
ALPINE_VERSION="v3.22"

# Alpine mirror
ALPINE_MIRROR="https://dl-cdn.alpinelinux.org/alpine"

# Enable testing repository (experimental/bleeding-edge packages)
# When enabled, testing repo is added as @testing tagged repository
# Tagged repos are NOT used by default - must explicitly request with @testing suffix
#
# Example used in the source code: apk add refind@testing (pulls refind from edge/testing repo)
#
# WARNING: Testing packages have NO official support and may break your system
# WARNING: Do NOT mix stable and edge main/community repos - only use @testing tag
ENABLE_TESTING="yes"

# ============================================
# zram Configuration
# ============================================

# zram size in MiB
ZRAM_SIZE=2048

# zram compression algorithm (lzo, lz4, zstd)
ZRAM_ALGO="zstd"

# ============================================
# Boot Configuration
# ============================================

# Bootloader choice (grub or refind)
# NOTE: refind requires ENABLE_TESTING="yes" (available in edge/testing repository)
BOOTLOADER="grub"

# GRUB timeout in seconds
GRUB_TIMEOUT=1

# GRUB menu entry name
MENUENTRY="ALPM-FS"

# rEFInd timeout in seconds
REFIND_TIMEOUT=20

# rEFInd resolution (e.g., 1920 1080)
REFIND_RESOLUTION="1920 1080"

# Extra kernel command line parameters (console, quiet, etc) Both for refind and grub
# Note: rootfstype and modules are auto-generated based on ROOT_FS_TYPE
# The rest is up to you to figure out for your hardware...
# This example setting fixes my Iris laptop's GPU

KERNEL_CMDLINE_EXTRA="console=tty0"

# ============================================
# System Packages
# ============================================
# Core system packages

# x86_64 kernel options:
# linux-lts (Long Term Support, most hardware)

# linux-stable (latest stable kernel) # NEEDS ALPINE_VERSION="edge" enabled
# and on alpine this one means trouble
# linux-virt (minimal VM kernel, omits a lot of drivers)
# linux-openpax (OpenPAX security memory patches)

KERNEL_FLAVOR="linux-virt"

CORE_PACKAGES="$KERNEL_FLAVOR linux-firmware-none acpi mkinitfs"

# System utilities
SYSTEM_PACKAGES="openrc openrc-init util-linux coreutils e2fsprogs dosfstools"

# ============================================
# Boot Services
# ============================================

# Services to add to sysinit runlevel (space-separated)
SERVICES_SYSINIT="devfs dmesg mdev"

# Services to add to boot runlevel
SERVICES_BOOT="hwclock modules sysctl hostname bootmisc syslog localmount zram-init"

# Services to add to shutdown runlevel
SERVICES_SHUTDOWN="mount-ro killprocs savecache"

# Services to add to default runlevel
SERVICES_DEFAULT="acpid networking"

# ============================================
# User Configuration
# ============================================

# Hostname
HOSTNAME="alpmfs"

# Default root password
ROOT_PASSWORD="alpine"

# System locale (run 'locale -a' to see all options)
# Common options: C.UTF-8, en_US.UTF-8, en_GB.UTF-8, etc.
LOCALE="C.UTF-8"

# Additional packages
EXTRA_PACKAGES="acpid busybox-openrc busybox-extras busybox-mdev-openrc alpine-conf kbd-bkeymaps kbd zram-init dhcpcd iptables musl-locales"

